<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Math Game</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css">
</head>
<body class="page-bg">
  <main class="centered-container game-page">
    <div class="game-card card">
      <div class="game-header" style="width:100%;">
        <div><h2>Math Game</h2><p class="note">Solve simple sums (0â€“10)</p></div>
        <div class="timer" id="timer">60</div>
      </div>

      <div style="display:flex;flex-direction:column;align-items:center;gap:12px;width:100%;">
        <div id="question" style="font-size:34px;font-weight:700"></div>
        <input id="answer" placeholder="Your answer" style="padding:10px;border-radius:8px;border:1px solid #dbe7ff;width:200px" />
        <div>Score: <span id="score">0</span></div>
        <div>
          <button id="submitBtn" class="btn primary">Submit</button>
          <button id="quitBtn" class="btn">Quit</button>
        </div>
      </div>

    </div>
  </main>

<script src="script.js"></script>
<script>
  if(!sessionStorage.getItem('sp_user')) location.href='login.html';
  let timerEl = document.getElementById('timer');
  let questionEl = document.getElementById('question');
  let answerEl = document.getElementById('answer');
  let scoreEl = document.getElementById('score');
  let submitBtn = document.getElementById('submitBtn');
  let quitBtn = document.getElementById('quitBtn');

  let time=60, score=0;
  function gen(){
    const a = Math.floor(Math.random()*11);
    const b = Math.floor(Math.random()*11);
    const ops = ['+','-','*'];
    const op = ops[Math.floor(Math.random()*ops.length)];
    let q = `${a} ${op} ${b}`;
    questionEl.textContent = q;
    return {q,ans: eval(q)};
  }
  let current = gen();

  let interval = setInterval(()=> {
    time--;
    timerEl.textContent = time;
    if(time<=0) endTimeout();
  },1000);

  function endTimeout(){
    clearInterval(interval);
    answerEl.disabled = true; submitBtn.disabled = true;
    window.spHelpers.gameEnd(false,'Time up');
  }

  submitBtn.addEventListener('click', ()=>{
    const v = Number(answerEl.value);
    if(isNaN(v)) return;
    if(v === current.ans){
      score++; scoreEl.textContent = score;
      // small animation
      questionEl.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:300});
      current = gen();
      answerEl.value='';
      answerEl.focus();
    } else {
      answerEl.value='';
      answerEl.focus();
    }
  });

  quitBtn.addEventListener('click', ()=> {
    clearInterval(interval);
    window.location='index.html';
  });
</script>
</body>
</html>
