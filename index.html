<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spin & Win</title>
<link rel="stylesheet" href="style.css">
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: url('https://www.oktoberfest.de/sites/default/files/styles/facebook/public/2025-01/whatsapp_image_2025-01-13_at_15.01.26.jpeg?h=71976bb4') no-repeat center center fixed;
        background-size: cover;
    }
    .spin-container {
        text-align: center;
        padding-top: 50px;
    }
    #wheelCanvas {
        border-radius: 50%;
        box-shadow: 0px 0px 20px rgba(0,0,0,0.5);
    }
    #spinBtn {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 18px;
        border: none;
        border-radius: 10px;
        background: #ff9800;
        color: white;
        cursor: pointer;
        transition: 0.3s;
    }
    #spinBtn:hover {
        background: #e68900;
    }
    #result {
        font-size: 20px;
        margin-top: 15px;
        font-weight: bold;
        color: white;
        text-shadow: 1px 1px 2px black;
    }
</style>
</head>
<body>
    <div class="spin-container">
        <h1 style="color:white; text-shadow: 2px 2px 4px black;">Spin & Win</h1>
        <canvas id="wheelCanvas" width="400" height="400"></canvas>
        <br>
        <button id="spinBtn">Spin Now</button>
        <p id="result"></p>
    </div>

<script>
const wheelCanvas = document.getElementById("wheelCanvas");
const ctx = wheelCanvas.getContext("2d");
const spinBtn = document.getElementById("spinBtn");
const resultText = document.getElementById("result");

const segments = ["Game 1", "Game 2", "Game 3", "Game 4", "Game 5"];
const colors = ["#FF5733", "#33FF57", "#3357FF", "#FF33A8", "#FFFF33"];

let startAngle = 0;
let arc = Math.PI / (segments.length / 2);
let spinAngle = 0;
let spinTimeout = null;
let spinAngleStart = 0;
let spinTime = 0;
let spinTimeTotal = 0;

function drawWheel() {
    ctx.clearRect(0, 0, wheelCanvas.width, wheelCanvas.height);
    for (let i = 0; i < segments.length; i++) {
        let angle = startAngle + i * arc;
        ctx.fillStyle = colors[i];
        ctx.beginPath();
        ctx.moveTo(200, 200);
        ctx.arc(200, 200, 200, angle, angle + arc, false);
        ctx.lineTo(200, 200);
        ctx.fill();
        ctx.save();
        ctx.fillStyle = "white";
        ctx.translate(200 + Math.cos(angle + arc / 2) * 150, 200 + Math.sin(angle + arc / 2) * 150);
        ctx.rotate(angle + arc / 2);
        ctx.fillText(segments[i], -ctx.measureText(segments[i]).width / 2, 0);
        ctx.restore();
    }
}

function rotateWheel() {
    spinTime += 30;
    if (spinTime >= spinTimeTotal) {
        stopRotateWheel();
        return;
    }
    let spinAngleNow = spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
    startAngle += (spinAngleNow * Math.PI / 180);
    drawWheel();
    spinTimeout = requestAnimationFrame(rotateWheel);
}

function stopRotateWheel() {
    cancelAnimationFrame(spinTimeout);
    let degrees = startAngle * 180 / Math.PI + 90;
    let arcd = arc * 180 / Math.PI;
    let index = Math.floor((360 - degrees % 360) / arcd);
    resultText.innerHTML = "You got: " + segments[index];
}

function easeOut(t, b, c, d) {
    let ts = (t/=d)*t;
    let tc = ts*t;
    return b+c*(tc + -3*ts + 3*t);
}

spinBtn.addEventListener("click", function(){
    spinAngleStart = Math.random() * 10 + 10;
    spinTime = 0;
    spinTimeTotal = Math.random() * 3000 + 4000;
    rotateWheel();
});

drawWheel();
</script>
</body>
</html>
